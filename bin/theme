#!/usr/bin/env bash
set -euo pipefail

DOTFILES=~/.dotfiles

function list_themes() {
  local current=$("$DOTFILES"/bin/theme-get)
  echo -e "\e[32müñåÔ∏è Current theme:\e[0m ${current:-<none>}"
  echo ""
  echo -e "\e[32müé® Available themes:\e[0m"
  "$DOTFILES"/bin/theme-list
}

function set_theme() {
  theme="$1"

  if [[ -z "$theme" ]]; then
    theme=$("$DOTFILES/bin/theme-list" | gum choose)
  fi

  "$DOTFILES"/bin/theme-set "$theme"
}

case "${1:-}" in
list)
  list_themes
  exit 0
  ;;
set)
  set_theme "${2:-}"
  exit 0
  ;;
*)
  echo "Theme manager"
  echo ""
  echo -e "\e[32mUsage:\e[0m $(basename "$0") COMMAND"
  echo ""
  echo -e "\e[32mCommands:\e[0m"
  echo -e "\e[34mlist\e[0m          List available themes"
  echo -e "\e[34mset \e[33m[THEME]\e[0m   Change current theme to THEME"
  exit 1
  ;;
esac
