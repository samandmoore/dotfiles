#!/usr/bin/env bash
set -euo pipefail

DOTFILES=~/.dotfiles

function list_themes() {
  echo "üñåÔ∏è Current theme:"
  "$DOTFILES"/bin/theme-current
  echo ""
  echo "üé® Available themes:"
  "$DOTFILES"/bin/theme-list
}

function change_theme() {
  theme="$1"

  if [[ -z "$theme" ]]; then
    theme=$("$DOTFILES/bin/theme-list" | gum choose)
  fi

  "$DOTFILES"/bin/theme-set "$theme"
}

case "${1:-}" in
--list)
  list_themes
  exit 0
  ;;
--change)
  change_theme "${2:-}"
  exit 0
  ;;
*)
  echo "Manage themes"
  echo "Usage: $0 [--list | --change [THEME]]"
  exit 1
  ;;
esac
